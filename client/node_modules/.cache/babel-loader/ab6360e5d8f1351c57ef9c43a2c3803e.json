{"ast":null,"code":"var _jsxFileName = \"/Users/swagatdash/Documents/Assignments/Dissertation/bot-gen-z/client/src/js/Pages/RunTime.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport nodeStructure from \"../../nodesStructure.json\"; // import nodeStructure from \"../../nodesStructureLong.json\";\n\nimport ChatBubbleComponent from \"../Components/RuntimeComponents/ChatBubbleComponent\";\nimport ChatBackground from \"../../img/chat_background.jpg\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nasync function checkNLPSimilarity(user_input, options) {\n  let response = await axios.post(\"http://127.0.0.1:8000/getComparision\", {\n    options,\n    user_input\n  });\n  return response.data;\n}\n\nexport default function RunTime() {\n  _s();\n\n  const [executedStages, setExecutedStages] = useState([nodeStructure[0]]);\n\n  const handleFlow = function (event) {\n    let textValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    console.log(\"Handle Flow called!!!\");\n    setExecutedStages(prevStage => {\n      let newStage = prevStage;\n\n      if (prevStage[prevStage.length - 1].type == \"startNode\" || prevStage[prevStage.length - 1].type == \"botNode\") {\n        for (let obj of nodeStructure) {\n          if (prevStage[prevStage.length - 1].children.length && Object.values(prevStage[prevStage.length - 1].children[0])[0] == obj.id && prevStage[prevStage.length - 1] != obj) newStage = [...prevStage, obj];\n        }\n      } else if (prevStage[prevStage.length - 1].type == \"yesNoNode\") {\n        if (event && event.target.parentElement.id === \"0\") {\n          for (let obj of nodeStructure) {\n            if (prevStage[prevStage.length - 1].children.length && Object.values(prevStage[prevStage.length - 1].children[0])[0] == obj.id && prevStage[prevStage.length - 1] != obj) newStage = [...prevStage, obj];\n          }\n        } else if (event && event.target.parentElement.id === \"1\") {\n          for (let obj of nodeStructure) {\n            if (prevStage[prevStage.length - 1].children.length && Object.values(prevStage[prevStage.length - 1].children[1])[0] == obj.id && prevStage[prevStage.length - 1] != obj) newStage = [...prevStage, obj];\n          }\n        }\n      } else if (event && prevStage[prevStage.length - 1].type == \"userText\") {\n        let correctIndex = null;\n\n        if (event && prevStage[prevStage.length - 1].isNLP) {\n          correctIndex = checkNLPSimilarity(textValue, prevStage[prevStage.length - 1].text); // .then((resp) => (correctIndex = resp.data))\n          // .catch(function (error) {\n          //   console.log(\"Errorredd!!\");\n          //   console.log(error);\n          // });\n        } else {\n          for (let index in prevStage[prevStage.length - 1].text) {\n            if (prevStage[prevStage.length - 1].text[index] == textValue) correctIndex = index;\n          }\n        }\n\n        for (let obj of nodeStructure) {\n          if (correctIndex && prevStage[prevStage.length - 1].children.length && Object.values(prevStage[prevStage.length - 1].children[correctIndex])[0] == obj.id && prevStage[prevStage.length - 1] != obj) {\n            newStage = [...prevStage, obj];\n          }\n        }\n      } else if (event && prevStage[prevStage.length - 1].type == \"buttonNode\") {\n        console.log(\"Button Clicked!!\");\n        let correctIndex = null;\n\n        for (let index in prevStage[prevStage.length - 1].text) {\n          if (prevStage[prevStage.length - 1].text[index] == event.target.textContent) correctIndex = index;\n        }\n\n        for (let obj of nodeStructure) {\n          if (correctIndex && prevStage[prevStage.length - 1].children.length && Object.values(prevStage[prevStage.length - 1].children[correctIndex])[0] == obj.id && prevStage[prevStage.length - 1] != obj) {\n            newStage = [...prevStage, obj];\n          }\n        }\n      }\n\n      return newStage;\n    });\n  };\n\n  useEffect(() => {// handleFlow();\n    // return () => {\n    // };\n  }\n  /*, []*/\n  // Auto render on update to print next Bot Component\n  );\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"runtime-container\",\n    style: {\n      backgroundImage: `url(${ChatBackground})`,\n      backgroundRepeat: \"repeat\",\n      width: \"100vw\",\n      height: \"100vh\",\n      position: \"fixed\",\n      overflow: \"scroll\"\n    },\n    children: executedStages.map((currentStage, index) => {\n      console.log(\"Above\");\n      return /*#__PURE__*/_jsxDEV(ChatBubbleComponent, {\n        currentStage: currentStage,\n        handleFlow: handleFlow\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n}\n\n_s(RunTime, \"TjX2z7axo0yF3ZY3l/fsMvpm1BQ=\");\n\n_c = RunTime;\n\nvar _c;\n\n$RefreshReg$(_c, \"RunTime\");","map":{"version":3,"names":["React","useState","useEffect","nodeStructure","ChatBubbleComponent","ChatBackground","axios","checkNLPSimilarity","user_input","options","response","post","data","RunTime","executedStages","setExecutedStages","handleFlow","event","textValue","console","log","prevStage","newStage","length","type","obj","children","Object","values","id","target","parentElement","correctIndex","isNLP","text","index","textContent","backgroundImage","backgroundRepeat","width","height","position","overflow","map","currentStage"],"sources":["/Users/swagatdash/Documents/Assignments/Dissertation/bot-gen-z/client/src/js/Pages/RunTime.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport nodeStructure from \"../../nodesStructure.json\";\n// import nodeStructure from \"../../nodesStructureLong.json\";\nimport ChatBubbleComponent from \"../Components/RuntimeComponents/ChatBubbleComponent\";\nimport ChatBackground from \"../../img/chat_background.jpg\";\nimport axios from \"axios\";\n\nasync function checkNLPSimilarity(user_input, options) {\n  let response = await axios.post(\"http://127.0.0.1:8000/getComparision\", {\n    options,\n    user_input,\n  });\n  return response.data;\n}\n\nexport default function RunTime() {\n  const [executedStages, setExecutedStages] = useState([nodeStructure[0]]);\n  const handleFlow = (event, textValue = \"\") => {\n    console.log(\"Handle Flow called!!!\");\n    setExecutedStages((prevStage) => {\n      let newStage = prevStage;\n      if (\n        prevStage[prevStage.length - 1].type == \"startNode\" ||\n        prevStage[prevStage.length - 1].type == \"botNode\"\n      ) {\n        for (let obj of nodeStructure) {\n          if (\n            prevStage[prevStage.length - 1].children.length &&\n            Object.values(prevStage[prevStage.length - 1].children[0])[0] ==\n              obj.id &&\n            prevStage[prevStage.length - 1] != obj\n          )\n            newStage = [...prevStage, obj];\n        }\n      } else if (prevStage[prevStage.length - 1].type == \"yesNoNode\") {\n        if (event && event.target.parentElement.id === \"0\") {\n          for (let obj of nodeStructure) {\n            if (\n              prevStage[prevStage.length - 1].children.length &&\n              Object.values(prevStage[prevStage.length - 1].children[0])[0] ==\n                obj.id &&\n              prevStage[prevStage.length - 1] != obj\n            )\n              newStage = [...prevStage, obj];\n          }\n        } else if (event && event.target.parentElement.id === \"1\") {\n          for (let obj of nodeStructure) {\n            if (\n              prevStage[prevStage.length - 1].children.length &&\n              Object.values(prevStage[prevStage.length - 1].children[1])[0] ==\n                obj.id &&\n              prevStage[prevStage.length - 1] != obj\n            )\n              newStage = [...prevStage, obj];\n          }\n        }\n      } else if (event && prevStage[prevStage.length - 1].type == \"userText\") {\n        let correctIndex = null;\n        if (event && prevStage[prevStage.length - 1].isNLP) {\n          correctIndex = checkNLPSimilarity(\n            textValue,\n            prevStage[prevStage.length - 1].text\n          );\n          // .then((resp) => (correctIndex = resp.data))\n          // .catch(function (error) {\n          //   console.log(\"Errorredd!!\");\n          //   console.log(error);\n          // });\n        } else {\n          for (let index in prevStage[prevStage.length - 1].text) {\n            if (prevStage[prevStage.length - 1].text[index] == textValue)\n              correctIndex = index;\n          }\n        }\n        for (let obj of nodeStructure) {\n          if (\n            correctIndex &&\n            prevStage[prevStage.length - 1].children.length &&\n            Object.values(\n              prevStage[prevStage.length - 1].children[correctIndex]\n            )[0] == obj.id &&\n            prevStage[prevStage.length - 1] != obj\n          ) {\n            newStage = [...prevStage, obj];\n          }\n        }\n      } else if (\n        event &&\n        prevStage[prevStage.length - 1].type == \"buttonNode\"\n      ) {\n        console.log(\"Button Clicked!!\");\n        let correctIndex = null;\n        for (let index in prevStage[prevStage.length - 1].text) {\n          if (\n            prevStage[prevStage.length - 1].text[index] ==\n            event.target.textContent\n          )\n            correctIndex = index;\n        }\n        for (let obj of nodeStructure) {\n          if (\n            correctIndex &&\n            prevStage[prevStage.length - 1].children.length &&\n            Object.values(\n              prevStage[prevStage.length - 1].children[correctIndex]\n            )[0] == obj.id &&\n            prevStage[prevStage.length - 1] != obj\n          ) {\n            newStage = [...prevStage, obj];\n          }\n        }\n      }\n      return newStage;\n    });\n  };\n\n  useEffect(\n    () => {\n      // handleFlow();\n      // return () => {\n      // };\n    } /*, []*/ // Auto render on update to print next Bot Component\n  );\n  return (\n    <div\n      className=\"runtime-container\"\n      style={{\n        backgroundImage: `url(${ChatBackground})`,\n        backgroundRepeat: \"repeat\",\n        width: \"100vw\",\n        height: \"100vh\",\n        position: \"fixed\",\n        overflow: \"scroll\",\n      }}\n    >\n      {executedStages.map((currentStage, index) => {\n        console.log(\"Above\");\n        return (\n          <ChatBubbleComponent\n            key={index}\n            currentStage={currentStage}\n            handleFlow={handleFlow}\n          />\n        );\n      })}\n    </div>\n  );\n}\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,aAAP,MAA0B,2BAA1B,C,CACA;;AACA,OAAOC,mBAAP,MAAgC,qDAAhC;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAEA,eAAeC,kBAAf,CAAkCC,UAAlC,EAA8CC,OAA9C,EAAuD;EACrD,IAAIC,QAAQ,GAAG,MAAMJ,KAAK,CAACK,IAAN,CAAW,sCAAX,EAAmD;IACtEF,OADsE;IAEtED;EAFsE,CAAnD,CAArB;EAIA,OAAOE,QAAQ,CAACE,IAAhB;AACD;;AAED,eAAe,SAASC,OAAT,GAAmB;EAAA;;EAChC,MAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCd,QAAQ,CAAC,CAACE,aAAa,CAAC,CAAD,CAAd,CAAD,CAApD;;EACA,MAAMa,UAAU,GAAG,UAACC,KAAD,EAA2B;IAAA,IAAnBC,SAAmB,uEAAP,EAAO;IAC5CC,OAAO,CAACC,GAAR,CAAY,uBAAZ;IACAL,iBAAiB,CAAEM,SAAD,IAAe;MAC/B,IAAIC,QAAQ,GAAGD,SAAf;;MACA,IACEA,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCC,IAAhC,IAAwC,WAAxC,IACAH,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCC,IAAhC,IAAwC,SAF1C,EAGE;QACA,KAAK,IAAIC,GAAT,IAAgBtB,aAAhB,EAA+B;UAC7B,IACEkB,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCG,QAAhC,CAAyCH,MAAzC,IACAI,MAAM,CAACC,MAAP,CAAcP,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCG,QAAhC,CAAyC,CAAzC,CAAd,EAA2D,CAA3D,KACED,GAAG,CAACI,EAFN,IAGAR,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,IAAmCE,GAJrC,EAMEH,QAAQ,GAAG,CAAC,GAAGD,SAAJ,EAAeI,GAAf,CAAX;QACH;MACF,CAbD,MAaO,IAAIJ,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCC,IAAhC,IAAwC,WAA5C,EAAyD;QAC9D,IAAIP,KAAK,IAAIA,KAAK,CAACa,MAAN,CAAaC,aAAb,CAA2BF,EAA3B,KAAkC,GAA/C,EAAoD;UAClD,KAAK,IAAIJ,GAAT,IAAgBtB,aAAhB,EAA+B;YAC7B,IACEkB,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCG,QAAhC,CAAyCH,MAAzC,IACAI,MAAM,CAACC,MAAP,CAAcP,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCG,QAAhC,CAAyC,CAAzC,CAAd,EAA2D,CAA3D,KACED,GAAG,CAACI,EAFN,IAGAR,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,IAAmCE,GAJrC,EAMEH,QAAQ,GAAG,CAAC,GAAGD,SAAJ,EAAeI,GAAf,CAAX;UACH;QACF,CAVD,MAUO,IAAIR,KAAK,IAAIA,KAAK,CAACa,MAAN,CAAaC,aAAb,CAA2BF,EAA3B,KAAkC,GAA/C,EAAoD;UACzD,KAAK,IAAIJ,GAAT,IAAgBtB,aAAhB,EAA+B;YAC7B,IACEkB,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCG,QAAhC,CAAyCH,MAAzC,IACAI,MAAM,CAACC,MAAP,CAAcP,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCG,QAAhC,CAAyC,CAAzC,CAAd,EAA2D,CAA3D,KACED,GAAG,CAACI,EAFN,IAGAR,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,IAAmCE,GAJrC,EAMEH,QAAQ,GAAG,CAAC,GAAGD,SAAJ,EAAeI,GAAf,CAAX;UACH;QACF;MACF,CAtBM,MAsBA,IAAIR,KAAK,IAAII,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCC,IAAhC,IAAwC,UAArD,EAAiE;QACtE,IAAIQ,YAAY,GAAG,IAAnB;;QACA,IAAIf,KAAK,IAAII,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCU,KAA7C,EAAoD;UAClDD,YAAY,GAAGzB,kBAAkB,CAC/BW,SAD+B,EAE/BG,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCW,IAFD,CAAjC,CADkD,CAKlD;UACA;UACA;UACA;UACA;QACD,CAVD,MAUO;UACL,KAAK,IAAIC,KAAT,IAAkBd,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCW,IAAlD,EAAwD;YACtD,IAAIb,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCW,IAAhC,CAAqCC,KAArC,KAA+CjB,SAAnD,EACEc,YAAY,GAAGG,KAAf;UACH;QACF;;QACD,KAAK,IAAIV,GAAT,IAAgBtB,aAAhB,EAA+B;UAC7B,IACE6B,YAAY,IACZX,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCG,QAAhC,CAAyCH,MADzC,IAEAI,MAAM,CAACC,MAAP,CACEP,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCG,QAAhC,CAAyCM,YAAzC,CADF,EAEE,CAFF,KAEQP,GAAG,CAACI,EAJZ,IAKAR,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,IAAmCE,GANrC,EAOE;YACAH,QAAQ,GAAG,CAAC,GAAGD,SAAJ,EAAeI,GAAf,CAAX;UACD;QACF;MACF,CA9BM,MA8BA,IACLR,KAAK,IACLI,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCC,IAAhC,IAAwC,YAFnC,EAGL;QACAL,OAAO,CAACC,GAAR,CAAY,kBAAZ;QACA,IAAIY,YAAY,GAAG,IAAnB;;QACA,KAAK,IAAIG,KAAT,IAAkBd,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCW,IAAlD,EAAwD;UACtD,IACEb,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCW,IAAhC,CAAqCC,KAArC,KACAlB,KAAK,CAACa,MAAN,CAAaM,WAFf,EAIEJ,YAAY,GAAGG,KAAf;QACH;;QACD,KAAK,IAAIV,GAAT,IAAgBtB,aAAhB,EAA+B;UAC7B,IACE6B,YAAY,IACZX,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCG,QAAhC,CAAyCH,MADzC,IAEAI,MAAM,CAACC,MAAP,CACEP,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,CAAgCG,QAAhC,CAAyCM,YAAzC,CADF,EAEE,CAFF,KAEQP,GAAG,CAACI,EAJZ,IAKAR,SAAS,CAACA,SAAS,CAACE,MAAV,GAAmB,CAApB,CAAT,IAAmCE,GANrC,EAOE;YACAH,QAAQ,GAAG,CAAC,GAAGD,SAAJ,EAAeI,GAAf,CAAX;UACD;QACF;MACF;;MACD,OAAOH,QAAP;IACD,CA9FgB,CAAjB;EA+FD,CAjGD;;EAmGApB,SAAS,CACP,MAAM,CACJ;IACA;IACA;EACD;EAAC;EAAS;EALJ,CAAT;EAOA,oBACE;IACE,SAAS,EAAC,mBADZ;IAEE,KAAK,EAAE;MACLmC,eAAe,EAAG,OAAMhC,cAAe,GADlC;MAELiC,gBAAgB,EAAE,QAFb;MAGLC,KAAK,EAAE,OAHF;MAILC,MAAM,EAAE,OAJH;MAKLC,QAAQ,EAAE,OALL;MAMLC,QAAQ,EAAE;IANL,CAFT;IAAA,UAWG5B,cAAc,CAAC6B,GAAf,CAAmB,CAACC,YAAD,EAAeT,KAAf,KAAyB;MAC3ChB,OAAO,CAACC,GAAR,CAAY,OAAZ;MACA,oBACE,QAAC,mBAAD;QAEE,YAAY,EAAEwB,YAFhB;QAGE,UAAU,EAAE5B;MAHd,GACOmB,KADP;QAAA;QAAA;QAAA;MAAA,QADF;IAOD,CATA;EAXH;IAAA;IAAA;IAAA;EAAA,QADF;AAwBD;;GApIuBtB,O;;KAAAA,O"},"metadata":{},"sourceType":"module"}